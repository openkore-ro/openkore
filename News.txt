==================
### CVS
==================

- Fixed comma placement in formatNumber sub (its what puts the commas
  in your zenny amount.
- Implemented the ability to set your own npc storage steps.
  It is based loosly off a combination of modKore and my old itemexchange code.
  Two new config.txt variables.
  autoStorage_npc_type and autoStorage_npc_steps
  if autoStorage_npc_type is blank it will use the current steps (and display a warning)
  			     1 it will use the current steps (c r1 n)
  			     2 it will use the steps for the comodo npcs (c c r1 n)
  			     3 it will use the steps defined in autoStorage_npc_steps
  autoStorage_npc_steps is a (any number of) space(s) seperated list of commands to send
  while attempting to store.
  These commands consist of n which will send the cancel command
  			    c which will send the continue command
  			    r* which will send a responce where the responce number is *
  			    (NOTE responce numbering starts at 0 (unlike it does if you
  			    are using sendTalkResponse)) after training everyone to start
  			    counting at 0, i thaught it best to preserve it ;)
- New config option: shop_random.
  When set to 1, the item order in the shop will be randomized.
- When in X-Kore mode, the RO client will still work if you shutdown Kore. However, you
  can't start Kore in X-Kore mode again until you've restarted the RO client.
- Kore will now correctly continue if it gets resurrected before respawn.
- avoid_ignore now works properly.

==================
### OpenKore 1.2.1
==================

- Removed error handler; it seems to be causing problems.
- Storage fix.
- Fix a crash with swrite() when using Perl 5.8 on some Linux systems.
- Fix a divison by zero error.
- Fix creation of "logs" folder on Win32.


==================
### OpenKore 1.2.0
==================

NOTE: This release depends on:
* tablepack version 1.2.
* The Perl module Win32::Console::ANSI (only if you're not using the .exe)

New features:
- Console text is now colorized. The colors are defined in
  control\consolecolors.txt
- You can now specify more than one item in useSelf_item_#.
- New regular expression for detecting GM names. This will get rid of many
  false matches. Names like "LaGMaster" don't match anymore.
- If dcOnDisconnect is set to -1, kore will not respawn nor disconnect on
  death.
- mon_control.txt's auto-teleport flag can now have two values:
  1 = teleport when monster's on screen
  2 = teleport when monster hits you
- Ability to automatically switch configuration file after a while.
  See the "New/changed config option" section about autoConfChange.
- Ability to tell kore to never sit, even when overweight.
- Both party and deal requests can now be auto-accepted.
  See the "New/changed config option" section about paryAuto/dealAuto.
- "drop" and "storage get" can now drop/get more than 1 item. Example:
  storage get 4,7   (gets storage item 4 and 7)
  drop 3,5          (drops inventory item 3 and 5)
- dumpData() now also dumps raw data so you can see strings (just like in
  hex editors).
- Ability to open a warp portal. See the "New commands" section about
  'sl' and 'warp'.
- A new experience report feature.
  See the "New commands" section about 'exp'.


Changes:
- Kore is now partially split into multiple modules.
- Some memory leaks have been fixed.
- Loading fields is now 3 times faster (it takes 0.3 seconds on my Athlon
  1.4 Ghz).
- Don't immediately reconnect if connecting to master server times out.
- The "sit" command now also sets itemsGatherAuto to 0.
- Don't drop target when a monster has already attacked you, but switches
  target later. This fixes a lot of "kore walks away when being kill
  stealed" complaints.
- Don't autorestart while taking items.
- Completely revamped cart inventory handling.
- Fixed storage issues.
- Log files (item log, chat log, walk.dat) are now stored in the logs folder.


New commands:
- cart desc - similar to 'i desc' but for the cart.
- Added the commandline argument --daemon. This argument allows you to
  start kore without input server so kore won't read input from console.
  Mostly useful for Linux users who run kore as a background service.
- sl - use skill on location
- warp - open warp portal
- exp - detailed report of gained experience, killed monsters, etc.


New/changed config options:
- useSelf_item_# can now be a comma-seperated list. Example:
  useSelf_item_0 Red Potion, Yellow Potion
- Config options for automatically switching configuration file:
  autoConfChange, autoConfChange_files, autoConfChange_min, autoConfChange_seed

  If autoConfChange is set to 1, switch configuration file after a certain
  amount of time. It's calculated as follows:
  time = autoConfChange_min + random(autoConfChange_seed)

  autoConfChange_files is a comma-seperated list of filenames. A random
  file from that list will be chosen as the new config file to load.

  Think of this feature as a more flexible version of timed lockMaps.
  With this feature you can not only set different lockMaps, but also
  different Kapras.
- sitAuto_over_50: when set to 1, kore won't sit when overweight.
- The config options "partyAutoDeny" and "dealAutoDeny" have been
  replaced by "partyAuto" and "dealAuto".
  0 = disable, 1 = auto-cancel. 2 = auto-accept


Special credit to:
- Digital Anomaly (support for packet 01EE)
- floAt (mon_control.txt's new auto-teleport flag)
- pmak (warp funcins)
- kokal (exp report)


==================
### OpenKore 1.0.3
==================

- *Really* fix vending this time.
- Fix storage listing.
- Fix avoid_ignore.


==================
### OpenKore 1.0.2
==================

- Fix vending.


==================
### OpenKore 1.0.1
==================

Bugfix release (iRO server changes on March 10 2004)
- Inventory listing fixed.
- Cart listing fixed.
- Linux version now uses XS instead of C::DynaLib.


==================
### OpenKore 1.0.0
==================

NOTE: a lot of new config options has been added. It's highly recommended
take the default configuration files and modify them, so that you won't
miss any of the new config options.

- Forgot to mention in the last News.txt:
  followEmotion requires another config option: followEmotion_distance
  The master must be within this distance to imitate his emoticons.
- Better way to autodetect platform (using $^O).
- Fixed teleportAuto_search.
- Added comments to some pieces of code.
- Fixed a typo in the clientSuspend AI sequence.
- Improved anti-looting.
- Don't get disconnected when AI's turned off in non-XKore mode.
- Changed avoidGM and avoid player code to an AI sequence.
  New entry for timeouts.txt:
	ai_avoidcheck 0.5
  New config options:
	avoidList	(set to 1 to turn on the avoid list)
	avoidList_reconnect
- Removed the need for the local_port config option.
  You can remove this option now!
- Input client child process will now exit correctly if parent process
  exits abnormally.
- Implemented a simple form of dynamic code reloading. All functions
  are now in functions.pl.
  New command: rc (reloads functions.pl)
- Vending code now supports multiple non-stackable items.
  Code by Star-Kung.
- Began work on Win98 support in Tools.dll and Inject.dll. It currently
  doesn't work so don't try it out!
- New config options:
  logChat, logPrivateChat, logPartyChat, logGuildChat, logSystemChat,
  logEmoticons
  Enables/disables logging of certain chats.
  The option logEmoticons is a comma-seperated list of emoticons numbers
  (see tables/emotions.txt), that you want to log.
- New config option: followBot
  Specifies that followTarget is a Kore bot. When enabled, a "move"
  command will be PM'ed to the follow target, telling him to go to
  where you are.
- Don't attack any monsters that are near portals.
- Renamed the following config options for better naming consistency:
  IgnoreAll      -> ignoreAll
  maxDmg         -> teleportAuto_maxDmg
  teleportDeadly -> teleportAuto_deadly
- Merged Karasu's storageAutoGet code and modified it a bit.
  Config options:
  getAuto_0 Red Potion
  getAuto_0_minAmount 10
  getAuto_0_maxAmount 50
  getAuto_0_passive 0

  Kore will go to storage (you need to set storageAuto and storageAuto_npc)
  to get Red Potions when you have 10 or less Red Potions in your inventory.
  It will get as many Red Potions as needed so that your inventory will have
  50 of them.
  If getAuto_0_passive is set to 1, then Kore will not go to storage when
  you have less than 10 Red Potions in your inventory. But, next time it
  goes to storage (because of overweight), it will get the Red Potions.
- New config option: useSelf_skill_0_inLockOnly
  Use a skill only when in lockMap.
- New config option: maxWeight_sellOrStore.
  Kore will sell or go to storage if weight equals or is bigger than
  itemsMaxWeight_sellOrStore. While walking to the sell/storage NPC,
  Kore will pick up loot as long as your weight is under itemsMaxWeight.
- New config options:
  storageAuto_distance
  buyAuto_0_distance
  sellAuto_distance
  Set a distance so Kore won't walk into an NPC.

xlr82xs:
- Removed dead monster count sub.
- Added admin password generation on blank aswell as default (since the skore default
  is blank, not "xxxxxxxxxx"
- New config.txt option securePassword. When turned on (ie set to 1) it will generate
  a new admin password every session
- New feature: random autoRestart:
  * Added new sub initRandomRestart() to randomise autoRestart in the config.txt file
    initRandomRestart() is controled by two new config.txt options autoRestartSeed 
    and autoRestartMin.
    autoRestart is now generated by autoRestartMin + rand(autoRestartSeed)
  * To carry on with the spirit of random restart times, there are another 3 new config.txt
    options.
    autoRestartSleep which turns on sleeping for a random time when set to 1
    autoSleepMin and autoSleepSeed (which act the same as the randomrestart options)
- Began work on better communication between bots. (Being lazy to start with (for a quick implement)
  and simply using a sub to detect known names (ie tank and follow targets, auth list users) that should
  be ignored by things such as chat ai so they can send eachother commands via chat (ie move, heal, etc)
  Eventually I'm looking at having the bots generate diagnostic information on a designated port, that can
  be polled by tankees (so they can find the tanker) and healers, so they can see the other bots location,
  hp, etc
  
- If you have the detoxify skill (by a card or being a thief) and get poisoned, you will automagically use it
- changed configModify() so it accepts a third paramater if it is 1 configModify() operates in "silent mode"
- added ai_itemExchangeCheck() returns 1 if you have atleast the amount of items specified in config.txt
	 you'll REALLY have to check the source for more information on this one (i just spent 10 minutes describing it
	 (i suck at documentation) and i'm about dead now)
  *  added AUTOEXCHANGE {  a new ai section to exchange items at an npc (see above for information about documentation)
	 although, the source is fairly documented...
  *  Made a note to make this more readable tommorrow after i've gotten some sleep.
  *  lots of new config.txt options along the lines of itemExchange_item_0, itemExchange_amount_0 itemExchange_minamount_0
	 and itemExchange_npc aswell as itemExchange_steps
- Shamelessly stole and implemented ebilguy / BCN's autodeal code




ChangeLog for skore-revamped
=============================

Another skore-revamped release (for those who complain about support for
(pre-)comodo):

- Added GPL clause.
- Improved platform autodetection. Won't attempt to execute 'uname -s'
  on Windows anymore.
- New function: lookpos().
- New command: lookp. Face a person.
- Resurrect the followSitAuto config option. Somehow it was in the manual
  but not implemented.
- New option: followFaceDirection. When set to 1, always look at master.
- Faster autofollow.
- "pl" and "ml" show more information now.
- Added support for recvpackets.txt (code taken from ModKore).
- Support secure login. New config option: secure
  0 = no secure login (iRO)
  1 = secure login method 1
  2 = secure login method 2
- New config option: guildAutoDeny
  Automatically deny guild join request.
- New command: guild. Support for listing guild members and info (thanks
  to ModKore).
- The avoidGM option is now split into avoidGM_near and avoidGM_talk.


Based on blueviper22's mod for RO 4.0:

- Merged X-Kore with skore-revamped. You can switch between "normal"
  (console) Kore and X-Kore by setting the config option "XKore"
  to 0 or 1. Add these to your config.txt:
  XKore 1
  exeName ragexe.exe
  commandPrefix ;

(Why didn't Kura do this in the first place? Maintaining one codebase is
easier than maintaining two.)


- More flexible packet debugger.
  * Removed option debug_packet
  * New options:
    debugPacket_unparsed: Dump unparsed packets
    debugPacket_received: Display all received packet switches
    debugPacket_ro_sent:  Display packet switches sent by the
                          RO client (only in X-Kore mode)
    debugPacket_sent:     Display packet switches sent by Kore
    debugPacket_exclude:  All packets switches that you want
                          to ignore, seperated by a comma.

- New config options:
  * followEmotion
  * followEmotion_distance
  When follow and followEmotion are on, imitate the master's
  emoticons if he's within followEmotion_distance blocks distance.

- Servers will now be hammered less if Kore gets disconnected.
  * New option in timeouts.txt: reconnect x
    (x is the number of seconds to wait before relogging in.)

- Improved anti-kill steal routines.
  * Bug fixes.
  * sendAttackStop() now actually works.
  * Doesn't walk away anymore when KS'ed.
  * The stun bug *should* be fixed by now but is untested.

- Code cleanups
  * Added comments to some parts of the code.
  * Indentication fixes (use Tabs, not spaces!).

- Renamed command "ai" to "aiv"
  Shows content of @ai_seq
- Command "ai" now toggles AI on and off.

- Respect itemHistory config option.

- New packets: 40A1, 01B0

- Automatically detect platform. No more need to change buildType if
  you're running Kore in Linux.

- Check valid $$r_args{'session'} before calling $CalcPath_destroy().
  This partially fixes a rare crash on teleport.

- "nl" now also shows NPC ID.

- Do not automatically attack monsters that are within than 4 blocks
  distance of another player. This makes you less suspicious.

- When a player teleports, he won't get removed from the player list.
  This has been fixed.

- Fixed attackAuto_followTarget. Attack the monster even if it misses
  the follow target.


----------------------------------------


skore-revamped was based on the latest skore build (http://ro.horoy.com/download.html)


October 1st:

1  - Changed dump config so it dumps automatically to dump.txt
2  - Fixed packet lengths
3  - Added 01D8, 01D9, 01DA, 01DE packets
[ TESTED -- STILL UNPARSED PACKET ]
4  - Added unparsed packet 01D7
[ TESTED -- WORKS]
5  - Added SIT>ATTACK>SIT fix (http://skore.sourceforge.net/phpBB2/viewtopic.php?t=880&highlight=sit+attack)
6  - Fixed Teleport code (No more free teleports) (http://skore.sourceforge.net/phpBB2/viewtopic.php?t=2037&start=0&postdays=0&postorder=asc&highlight=)
[ TESTED -- WORKS | Teleport UNTESTED ]
7  - Added Long Distance Fix (http://skore.sourceforge.net/phpBB2/viewtopic.php?t=1306&start=0&postdays=0&postorder=asc&highlight=spekids)

--[ Done for the night. ]--

October 3rd:

[ TESTED -- WORKS IN MIDS 2 | Teleport UNTESTED ]
1  - 'chist' bug fixed (http://skore.sourceforge.net/phpBB2/viewtopic.php?t=1360&start=0&postdays=0&postorder=asc&highlight=chist)
2  - added item timeout code (http://skore.sourceforge.net/phpBB2/viewtopic.php?t=709&start=0&postdays=0&postorder=asc&highlight=item timeout)
3  - added Monster Count code (http://skore.sourceforge.net/phpBB2/viewtopic.php?t=1490&start=15&postdays=0&postorder=asc&highlight=item timeout)
[ TESTED -- chist, Monster Count works | item timeout untested ]
[ MORE TESTING -- BUGS -- Teleport doesn't work & Does respawn when dead ]
4  - Went through code and fixed teleport code. It now works. Also respawns correctly when dead.
5  - Added Item History Code (Extracted from http://xlr82xs.shacknet.nu/diff)
6  - Added MVP packets (Extracted from http://xlr82xs.shacknet.nu/diff)
7  - Added packets 0108 & 0188 (Extracted from http://xlr82xs.shacknet.nu/diff)
8  - Fixed pet spawn packet 01A4 (Extracted from http://xlr82xs.shacknet.nu/diff)
9  - Added auto-switch shield code (Extracted from http://xlr82xs.shacknet.nu/diff)
[ TESTED -- Item History works | Everything else untested ]
10 - Added 'cil' command to clear item history and fixed 'ihist' for when item log is empty
[ TESTED -- 'cil' and 'ihist' work in accordance to each other ]
11 - Added code to show location of where item is picked up in items.txt
[ TESTED -- map name shows properly ]
[ TESTED -- Auto-switch command works, 'petl' displays good ]
12 - Added code for updated mapview
13 - Added code for avoidTeleport
14 - Modified GM string search method (tested and works GREAT!)
15 - Added avoid AID code
[ TESTED -- LOTS OF TESTING for GM search. Works flawlessly, Mapview works great too ]
16 - Added 'IgnoreAll' switch for config.txt
[ TESTED -- works ]
17 - Changed killsteal methods (http://skore.sourceforge.net/phpBB2/viewtopic.php?t=1820&start=0&postdays=0&postorder=asc&highlight=kill steal)
[ TESTED -- no errors so far | tested in payon dungeon ]
18 - Added MOD to teleport when over ### damage is dealt (http://skore.sourceforge.net/phpBB2/viewtopic.php?t=2065)

--[ Done for the night. ]--

--------------------------------------------------------------------------------------------------------------------------------
Released: skore-revamped (http://skore.sourceforge.net/phpBB2/viewtopic.php?t=2467&start=0&postdays=0&postorder=asc&highlight=)
--------------------------------------------------------------------------------------------------------------------------------

October 4th:

1  - Added autoResponseOnHeal code
2  - Changed avoidGM method to disconnect on sight of GM AND avoid.txt
[ TESTED - AvoidGM works with people in avoid.txt wonderfully ]


3  - Added "Monster attacks: ()" bug fix (http://skore.sourceforge.net/phpBB2/viewtopic.php?t=2131&start=0&postdays=0&postorder=asc&highlight=)
4  - Made new script: fld2xbm.pl  (converts .fld to .xbm, necessary for new maps in mapview)
5  - Updated portals.txt, maps.txt, cities.txt, portalsLOS.txt, Maps folder, responses.txt, and config.txt
6  - Made a skore-revamped.rar containing EVERYTHING you need to get the bot working except a configured config.txt file

--[ Done for the night. ]--

October 8th:

1  - Added 01AC unparsed packet
2  - Added Weight overflow fix 

--[ Done for the night. ]--

October 8th:

1  - Added 016A & 0148 unparsed packets
2  - Fixed bug where bot would disconnect if GM would send a broadcast message
3  - Added length checker for every packet in the bot
4  - Added packet debugger found here (http://kore.sourceforge.net/phpBB2/viewtopic.php?t=2964&start=0&postdays=0&postorder=asc&highlight=)

--[ Done for the night. ]--

-------------------------------------------------------------------------------------
Uploaded updated skore-revamped
-------------------------------------------------------------------------------------

October 9th:

1  - Added 013B unparsed packet
2  - Added 0128 unparsed packet

-------------------------------------------------------------------------------------
Still Alive Guys
-------------------------------------------------------------------------------------

October 23rd:

1  - Updated Anti-KS logic (http://skore.sourceforge.net/phpBB2/viewtopic.php?t=1820)
2  - Added following unparsed packets: 01AD, 01CB, 01B6, 01E0, 0157, 018C, 0182, 01BF
3  - Applied 1 and 2 to kRO version

November 7th:

1  - Updated mapview to display HP/SP/Name/etc - from junq
2  - Added Auto-Heal NPC code

November 12th:

1  - Started to use proper variable initialization in some places. Bot ran fine for the
     last 12h, so I assume it's safe to import it to CVS. Couple of the functions used
     when loading the config files cleaned up, more internal error checking. (junq)
