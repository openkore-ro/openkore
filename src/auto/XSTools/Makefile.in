@HEADER@
.PHONY: sub clean

OBJ=pathfinding/*.o misc/*.o
#if unix
OBJ+=unix/*.o
#endif
#if win32
OBJ+=win32/wrapper.o win32/utils.o
#endif

XSTools.$(DLLEXT): sub
	dlltool --dllname XSTools.dll --output-def symbols.gccdef --export-all-symbols --add-stdcall-alias $(OBJ)
	$(DLLWRAP) $(OBJ) -o XSTools.$(DLLEXT) $(LIBPERL)


sub:
	gmake -C pathfinding
	gmake -C misc
#if unix
	gmake -C unix
#endif
#if win32
	gmake -C win32
#endif


clean:
	rm -f XSTools.$(DLLEXT) symbols.gccdef Makefile.real
	gmake clean -C pathfinding
#if unix
	gmake clean -C unix
#endif
#if win32
	gmake clean -C win32
#endif
